var lunrdoc=lunrdoc||{};lunrdoc.init=function(e){e=e||{};var t=[];if(typeof lunrdoc.indexJson==="undefined"){t.push("Lunr: The index is not available. Make sure that lunr_data.js is loaded before this script.")}var n={inputID:"lunr-input",hiddenID:"lunr-hidden",resultsID:"lunr-results",facetsID:"lunr-facets"};for(var r in n){if(typeof e[r]==="undefined"){e[r]=n[r]}}lunrdoc.inputBox=document.querySelector("#"+e.inputID);lunrdoc.hidden=document.querySelector("#"+e.hiddenID);lunrdoc.resultsContainer=document.querySelector("#"+e.resultsID);lunrdoc.facetsContainer=document.querySelector("#"+e.facetsID);if(!lunrdoc.inputBox){t.push("Lunr: An input element with the id "+e.inputID+" must exist on the page.")}if(t.length>0){for(var i in t){console.log(t[i])}return}lunrdoc.useFacets=false;if(typeof lunrdoc.facets!=="undefined"){lunrdoc.useFacets=true;var s={};for(var i in lunrdoc.facets){s[lunrdoc.facets[i].name]={};if(typeof lunrdoc.facets[i].label!=="undefined"){s[lunrdoc.facets[i].name].label=lunrdoc.facets[i].label}}lunrdoc.facets=s;lunrdoc.activeFilters={};if(lunrdoc.hidden){var o=lunrdoc.hidden.value;if(o){lunrdoc.activeFilters=JSON.parse(o)}}}if(lunrdoc.useFacets&&!lunrdoc.facetsContainer){lunrdoc.facetsContainer=document.createElement("div");lunrdoc.facetsContainer.id=e.facetsID;lunrdoc.inputBox.parentNode.appendChild(lunrdoc.facetsContainer)}if(!lunrdoc.resultsContainer){lunrdoc.resultsContainer=document.createElement("div");lunrdoc.resultsContainer.id=e.resultsID;lunrdoc.inputBox.parentNode.appendChild(lunrdoc.resultsContainer)}var u=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return n==null?"":decodeURIComponent(n[1].replace(/\+/g," "))};var a=u("keys");if(a){lunrdoc.inputBox.value=a}lunrdoc.idx=lunr.Index.load(lunrdoc.indexJson);lunrdoc.inputBox.onkeyup=lunrdoc.doSearch;lunrdoc.inputBox.focus();lunrdoc.doSearch()};lunrdoc.toggleFilter=function(e,t,n){if(typeof lunrdoc.activeFilters[e]!=="undefined"&&typeof lunrdoc.activeFilters[e][t]!=="undefined"){delete lunrdoc.activeFilters[e][t];var r=false;for(var i in lunrdoc.activeFilters[e]){r=true;break}if(!r){delete lunrdoc.activeFilters[e]}n.className=""}else{if(typeof lunrdoc.activeFilters[e]==="undefined"){lunrdoc.activeFilters[e]={}}if(typeof lunrdoc.activeFilters[e][t]==="undefined"){lunrdoc.activeFilters[e][t]={}}n.className="active"}};lunrdoc.printFacets=function(){lunrdoc.facetsContainer.innerHTML="";for(var e in lunrdoc.activeFilters){if(typeof lunrdoc.currentFacets[e]==="undefined"){lunrdoc.currentFacets[e]={}}for(var t in lunrdoc.activeFilters[e]){if(typeof lunrdoc.currentFacets[e][t]==="undefined"){lunrdoc.currentFacets[e][t]=0}}}for(var n in lunrdoc.currentFacets){var r=document.createElement("div");var i=document.createElement("h3");var s=n;if(typeof lunrdoc.facets[n].label!=="undefined"){s=lunrdoc.facets[n].label}var o=document.createTextNode(s);i.appendChild(o);var u=document.createElement("ul");var a=new lunr.SortedSet;var f={};for(var l in lunrdoc.currentFacets[n]){var c=document.createTextNode(l+" ("+lunrdoc.currentFacets[n][l]+")");var h=document.createElement("li");h.appendChild(c);if(typeof lunrdoc.activeFilters[n]!=="undefined"&&typeof lunrdoc.activeFilters[n][l]!=="undefined"){h.className="active"}h.onclick=function(e,t){return function(){lunrdoc.toggleFilter(e,t,this);lunrdoc.doSearch()}}(n,l);f[l]=h;a.add(l)}var p=a.toArray();for(var d in p){u.appendChild(f[p[d]])}r.appendChild(i);r.appendChild(u);lunrdoc.facetsContainer.appendChild(r)}};lunrdoc.doSearch=function(){var e=lunrdoc.inputBox.value;if(e){lunrdoc.resultsContainer.innerHTML="";lunrdoc.currentFacets={};var t=lunrdoc.idx.search(e);if(t.length==0){lunrdoc.resultsContainer.innerHTML=lunrdoc.noResultsMessage}else{for(var n in t){var r=lunrdoc.content[t[n].ref];var i=true;if(lunrdoc.useFacets){for(var s in lunrdoc.activeFilters){if(typeof r[s]==="undefined"){i=false;break}else if(Array.isArray(r[s])){for(var o in lunrdoc.activeFilters[s]){if(r[s].indexOf(o)==-1){i=false;break}}}else{for(var o in lunrdoc.activeFilters[s]){if(r[s]!=o){i=false;break}}}}}if(i){lunrdoc.resultsContainer.innerHTML+=lunrdoc.template({post:r});if(lunrdoc.useFacets){for(var s in lunrdoc.facets){if(typeof r[s]==="undefined"){continue}if(typeof lunrdoc.currentFacets[s]==="undefined"){lunrdoc.currentFacets[s]={}}if(Array.isArray(r[s])){for(var u in r[s]){if(typeof lunrdoc.currentFacets[s][r[s][u]]==="undefined"){lunrdoc.currentFacets[s][r[s][u]]=0}lunrdoc.currentFacets[s][r[s][u]]+=1}}else{if(typeof lunrdoc.currentFacets[s][r[s]]==="undefined"){lunrdoc.currentFacets[s][r[s]]=0}lunrdoc.currentFacets[s][r[s]]+=1}}}}}}if(lunrdoc.useFacets){lunrdoc.hidden.value=JSON.stringify(lunrdoc.activeFilters);lunrdoc.printFacets()}}};lunrdoc.ready=function(e){lunrdoc.init();window.removeEventListener("DOMContentLoaded",lunrdoc.ready)};window.addEventListener("DOMContentLoaded",lunrdoc.ready)